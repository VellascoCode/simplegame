{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/app/api/tiles/route.ts"],"sourcesContent":["import { promises as fs } from \"node:fs\";\nimport path from \"node:path\";\nimport type { TileManifest, TileInfo } from \"@/lib/tileManifest\";\n\nfunction sortNaturally(files: string[]) {\n  return files.sort((a, b) => a.localeCompare(b, undefined, { numeric: true, sensitivity: \"base\" }));\n}\n\nasync function listFiles(dir: string) {\n  try {\n    return await fs.readdir(dir);\n  } catch {\n    return [];\n  }\n}\n\nfunction buildTileList(files: string[], basePath: string, startId = 0): TileInfo[] {\n  return files.map((file, index) => ({\n    id: startId + index,\n    label: file.replace(/\\.[^.]+$/, \"\"),\n    image: path.posix.join(basePath, file).replace(/\\\\/g, \"/\")\n  }));\n}\n\nexport async function GET() {\n  const root = path.join(process.cwd(), \"public\", \"tilesets\");\n  const groundFiles = sortNaturally(\n    (await listFiles(root)).filter((file) => /^tile\\d+\\.(png|jpg|jpeg)$/i.test(file))\n  );\n  const detailFiles = sortNaturally(\n    (await listFiles(path.join(root, \"details\"))).filter((file) => /^d\\d+\\.(png|jpg|jpeg)$/i.test(file))\n  );\n  const buildingFiles = sortNaturally(\n    (await listFiles(path.join(root, \"buildings\"))).filter((file) => /\\.(png|jpg|jpeg)$/i.test(file))\n  );\n\n  const manifest: TileManifest = {\n    ground: buildTileList(groundFiles, \"/tilesets\"),\n    details: buildTileList(detailFiles, \"/tilesets/details\", 1),\n    buildings: buildTileList(buildingFiles, \"/tilesets/buildings\", 1)\n  };\n\n  return Response.json(manifest);\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGA,SAAS,cAAc,KAAe;IACpC,OAAO,MAAM,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,aAAa,CAAC,GAAG,WAAW;YAAE,SAAS;YAAM,aAAa;QAAO;AACjG;AAEA,eAAe,UAAU,GAAW;IAClC,IAAI;QACF,OAAO,MAAM,yHAAE,CAAC,OAAO,CAAC;IAC1B,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEA,SAAS,cAAc,KAAe,EAAE,QAAgB,EAAE,UAAU,CAAC;IACnE,OAAO,MAAM,GAAG,CAAC,CAAC,MAAM,QAAU,CAAC;YACjC,IAAI,UAAU;YACd,OAAO,KAAK,OAAO,CAAC,YAAY;YAChC,OAAO,4HAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,MAAM,OAAO,CAAC,OAAO;QACxD,CAAC;AACH;AAEO,eAAe;IACpB,MAAM,OAAO,4HAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU;IAChD,MAAM,cAAc,cAClB,CAAC,MAAM,UAAU,KAAK,EAAE,MAAM,CAAC,CAAC,OAAS,6BAA6B,IAAI,CAAC;IAE7E,MAAM,cAAc,cAClB,CAAC,MAAM,UAAU,4HAAI,CAAC,IAAI,CAAC,MAAM,WAAW,EAAE,MAAM,CAAC,CAAC,OAAS,0BAA0B,IAAI,CAAC;IAEhG,MAAM,gBAAgB,cACpB,CAAC,MAAM,UAAU,4HAAI,CAAC,IAAI,CAAC,MAAM,aAAa,EAAE,MAAM,CAAC,CAAC,OAAS,qBAAqB,IAAI,CAAC;IAG7F,MAAM,WAAyB;QAC7B,QAAQ,cAAc,aAAa;QACnC,SAAS,cAAc,aAAa,qBAAqB;QACzD,WAAW,cAAc,eAAe,uBAAuB;IACjE;IAEA,OAAO,SAAS,IAAI,CAAC;AACvB"}}]
}