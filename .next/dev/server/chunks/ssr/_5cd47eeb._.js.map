{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/lib/clientApi.ts"],"sourcesContent":["const rawBase = process.env.NEXT_PUBLIC_API_URL?.trim() ?? \"\";\nconst API_BASE = /^https?:\\/\\//i.test(rawBase) ? rawBase.replace(/\\/$/, \"\") : \"\";\n\nfunction buildUrl(path: string) {\n  const normalizedPath = path.startsWith(\"/\") ? path : `/${path}`;\n  if (!API_BASE) return normalizedPath;\n  if (API_BASE.endsWith(\"/api\") && normalizedPath.startsWith(\"/api\")) {\n    const trimmed = normalizedPath.slice(4) || \"/\";\n    return `${API_BASE}${trimmed}`;\n  }\n  return `${API_BASE}${normalizedPath}`;\n}\n\nexport async function getJSON<T>(path: string) {\n  const response = await fetch(buildUrl(path), {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    cache: \"no-store\"\n  });\n\n  if (!response.ok) {\n    throw new Error(await response.text());\n  }\n\n  return (await response.json()) as T;\n}\n\nexport async function postJSON<T>(path: string, body: unknown) {\n  const response = await fetch(buildUrl(path), {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(body)\n  });\n\n  if (!response.ok) {\n    throw new Error(await response.text());\n  }\n\n  return (await response.json()) as T;\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,UAAU,4DAAiC,UAAU;AAC3D,MAAM,WAAW,gBAAgB,IAAI,CAAC,WAAW,QAAQ,OAAO,CAAC,OAAO,MAAM;AAE9E,SAAS,SAAS,IAAY;IAC5B,MAAM,iBAAiB,KAAK,UAAU,CAAC,OAAO,OAAO,CAAC,CAAC,EAAE,MAAM;IAC/D,IAAI,CAAC,UAAU,OAAO;IACtB,IAAI,SAAS,QAAQ,CAAC,WAAW,eAAe,UAAU,CAAC,SAAS;QAClE,MAAM,UAAU,eAAe,KAAK,CAAC,MAAM;QAC3C,OAAO,GAAG,WAAW,SAAS;IAChC;IACA,OAAO,GAAG,WAAW,gBAAgB;AACvC;AAEO,eAAe,QAAW,IAAY;IAC3C,MAAM,WAAW,MAAM,MAAM,SAAS,OAAO;QAC3C,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,OAAO;IACT;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI;IACrC;IAEA,OAAQ,MAAM,SAAS,IAAI;AAC7B;AAEO,eAAe,SAAY,IAAY,EAAE,IAAa;IAC3D,MAAM,WAAW,MAAM,MAAM,SAAS,OAAO;QAC3C,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI;IACrC;IAEA,OAAQ,MAAM,SAAS,IAAI;AAC7B"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/app/forest/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { postJSON } from \"@/lib/clientApi\";\n\nexport default function ForestPage() {\n  const [ownerId, setOwnerId] = useState(\"\");\n  const [log, setLog] = useState<string | null>(null);\n\n  async function handleKill() {\n    if (!ownerId) {\n      setLog(\"Informe o ownerId.\");\n      return;\n    }\n    try {\n      const result = await postJSON<{ reward: { name: string } }>(\"/api/forest/kill\", { ownerId });\n      setLog(`Criatura derrotada. Loot: ${result.reward.name}`);\n    } catch (err) {\n      setLog(getMessage(err));\n    }\n  }\n\n  return (\n    <section>\n      <div className=\"card\">\n        <h2>Etapa 4 — Floresta</h2>\n        <p>Matar a criatura básica gera uma recompensa simples adicionada ao inventário.</p>\n        <input\n          placeholder=\"owner-123\"\n          value={ownerId}\n          onChange={(event) => setOwnerId(event.target.value)}\n        />\n        <button className=\"button\" style={{ marginTop: 12 }} type=\"button\" onClick={handleKill}>\n          Matar Criatura\n        </button>\n        {log && <p>{log}</p>}\n      </div>\n    </section>\n  );\n}\n\nfunction getMessage(err: unknown) {\n  return err instanceof Error ? err.message : \"Falha na floresta\";\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAE9C,eAAe;QACb,IAAI,CAAC,SAAS;YACZ,OAAO;YACP;QACF;QACA,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,4HAAQ,EAA+B,oBAAoB;gBAAE;YAAQ;YAC1F,OAAO,CAAC,0BAA0B,EAAE,OAAO,MAAM,CAAC,IAAI,EAAE;QAC1D,EAAE,OAAO,KAAK;YACZ,OAAO,WAAW;QACpB;IACF;IAEA,qBACE,8OAAC;kBACC,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;8BAAG;;;;;;8BACJ,8OAAC;8BAAE;;;;;;8BACH,8OAAC;oBACC,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;;;;;;8BAEpD,8OAAC;oBAAO,WAAU;oBAAS,OAAO;wBAAE,WAAW;oBAAG;oBAAG,MAAK;oBAAS,SAAS;8BAAY;;;;;;gBAGvF,qBAAO,8OAAC;8BAAG;;;;;;;;;;;;;;;;;AAIpB;AAEA,SAAS,WAAW,GAAY;IAC9B,OAAO,eAAe,QAAQ,IAAI,OAAO,GAAG;AAC9C"}}]
}