{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/app/editor/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\n\nconst PIN = \"8989\";\nconst DEFAULT_GRID_WIDTH = 32;\nconst DEFAULT_GRID_HEIGHT = 20;\nconst MIN_SIZE = 8;\nconst MAX_WIDTH = 64;\nconst MAX_HEIGHT = 40;\n\nconst palette = [\n  { id: 0, label: \"Piso tile1\", image: \"/tilesets/tile1.png\" },\n  { id: 1, label: \"Piso tile2\", image: \"/tilesets/tile2.png\" }\n] as const;\n\ntype GridMatrix = number[][];\n\nfunction buildEmptyGrid(width: number, height: number): GridMatrix {\n  return Array.from({ length: height }, () => Array(width).fill(0));\n}\n\nexport default function EditorPage() {\n  const [pin, setPin] = useState(\"\");\n  const [unlocked, setUnlocked] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedTile, setSelectedTile] = useState<number>(palette[0].id);\n  const [gridWidth, setGridWidth] = useState(DEFAULT_GRID_WIDTH);\n  const [gridHeight, setGridHeight] = useState(DEFAULT_GRID_HEIGHT);\n  const [grid, setGrid] = useState<GridMatrix>(() =>\n    buildEmptyGrid(DEFAULT_GRID_WIDTH, DEFAULT_GRID_HEIGHT)\n  );\n  const [copied, setCopied] = useState(false);\n\n  const output = useMemo(() => JSON.stringify(grid), [grid]);\n\n  function authenticate(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    if (pin === PIN) {\n      setUnlocked(true);\n      setError(null);\n    } else {\n      setError(\"PIN inválido\");\n    }\n  }\n\n  function paintCell(rowIndex: number, columnIndex: number) {\n    setGrid((previous) =>\n      previous.map((row, r) =>\n        row.map((value, c) => {\n          if (r === rowIndex && c === columnIndex) {\n            return selectedTile;\n          }\n          return value;\n        })\n      )\n    );\n  }\n\n  function clearGrid() {\n    setGrid(buildEmptyGrid(gridWidth, gridHeight));\n  }\n\n  function handleDimensionChange(width: number, height: number) {\n    const clampedWidth = clamp(width, MIN_SIZE, MAX_WIDTH);\n    const clampedHeight = clamp(height, MIN_SIZE, MAX_HEIGHT);\n    setGrid((previous) =>\n      Array.from({ length: clampedHeight }, (_, rowIndex) =>\n        Array.from({ length: clampedWidth }, (_, columnIndex) => previous[rowIndex]?.[columnIndex] ?? 0)\n      )\n    );\n    setGridWidth(clampedWidth);\n    setGridHeight(clampedHeight);\n  }\n\n  async function copyToClipboard() {\n    await navigator.clipboard.writeText(output);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 1500);\n  }\n\n  function saveToFile() {\n    const blob = new Blob([output], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const anchor = document.createElement(\"a\");\n    anchor.href = url;\n    anchor.download = \"map_city.json\";\n    anchor.click();\n    URL.revokeObjectURL(url);\n  }\n\n  return (\n    <section>\n      <div className=\"card\">\n        <h2>Admin / Editor de Mapas</h2>\n        <p>Restrito. Use o PIN <strong>8989</strong> para habilitar o editor de tiles da cidade.</p>\n        {!unlocked && (\n          <form onSubmit={authenticate}>\n            <label htmlFor=\"pin\">PIN</label>\n            <input\n              id=\"pin\"\n              type=\"password\"\n              value={pin}\n              onChange={(event) => setPin(event.target.value)}\n              placeholder=\"****\"\n            />\n            {error && <p>{error}</p>}\n            <button className=\"button\">Entrar</button>\n          </form>\n        )}\n        {unlocked && (\n          <p>\n            Acesso concedido. Configure abaixo (grid padrão {DEFAULT_GRID_WIDTH}×{DEFAULT_GRID_HEIGHT}) e\n            exporte para o Phaser.\n          </p>\n        )}\n      </div>\n\n      {unlocked && (\n        <>\n          <div className=\"card\">\n            <h3>Paleta de Tiles</h3>\n            <p>Ambos possuem 100×100 px e são reamostrados para blocos de 32 px no mapa.</p>\n            <div style={{ display: \"flex\", gap: 12, flexWrap: \"wrap\" }}>\n              {palette.map((tile) => (\n                <button\n                  key={tile.id}\n                  type=\"button\"\n                  onClick={() => setSelectedTile(tile.id)}\n                  style={{\n                    borderRadius: 12,\n                    padding: 0,\n                    width: 64,\n                    height: 64,\n                    border: selectedTile === tile.id ? \"2px solid #48c6ef\" : \"1px solid rgba(255,255,255,0.2)\",\n                    backgroundImage: `url(${tile.image})`,\n                    backgroundSize: \"cover\",\n                    backgroundPosition: \"center\",\n                    cursor: \"pointer\"\n                  }}\n                  title={tile.label}\n                />\n              ))}\n            </div>\n          </div>\n\n          <div className=\"card\">\n            <h3>Dimensões do Grid</h3>\n            <p>Aumente ou diminua largura/altura conforme necessidade. Limites: largura até 64, altura até 40.</p>\n            <div className=\"grid\" style={{ gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\" }}>\n              <div>\n                <label htmlFor=\"grid-width\">Largura (colunas)</label>\n                <input\n                  id=\"grid-width\"\n                  type=\"number\"\n                  min={MIN_SIZE}\n                  max={MAX_WIDTH}\n                  value={gridWidth}\n                  onChange={(event) => handleDimensionChange(Number(event.target.value), gridHeight)}\n                />\n              </div>\n              <div>\n                <label htmlFor=\"grid-height\">Altura (linhas)</label>\n                <input\n                  id=\"grid-height\"\n                  type=\"number\"\n                  min={MIN_SIZE}\n                  max={MAX_HEIGHT}\n                  value={gridHeight}\n                  onChange={(event) => handleDimensionChange(gridWidth, Number(event.target.value))}\n                />\n              </div>\n              <div style={{ alignSelf: \"end\", display: \"flex\", gap: 8 }}>\n                <button\n                  className=\"button\"\n                  type=\"button\"\n                  onClick={() => handleDimensionChange(gridWidth + 2, gridHeight)}\n                >\n                  + largura\n                </button>\n                <button\n                  className=\"button\"\n                  type=\"button\"\n                  onClick={() => handleDimensionChange(gridWidth, gridHeight + 2)}\n                >\n                  + altura\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"card\">\n            <h3>Grid ({gridWidth} × {gridHeight})</h3>\n            <p>Cada célula representa 32 px no Phaser. Clique para pintar.</p>\n            <div\n              style={{\n                display: \"grid\",\n                gridTemplateColumns: `repeat(${gridWidth}, 24px)`,\n                gap: 2,\n                justifyContent: \"flex-start\",\n                overflowX: \"auto\"\n              }}\n            >\n              {grid.map((row, rowIndex) =>\n                row.map((value, columnIndex) => (\n                  <button\n                    type=\"button\"\n                    key={`${rowIndex}-${columnIndex}`}\n                    onClick={() => paintCell(rowIndex, columnIndex)}\n                    style={{\n                      width: 24,\n                      height: 24,\n                      padding: 0,\n                      border: \"1px solid rgba(255,255,255,0.2)\",\n                      borderRadius: 4,\n                      backgroundImage: `url(${\n                        palette.find((tile) => tile.id === value)?.image ?? palette[0].image\n                      })`,\n                      backgroundSize: \"cover\",\n                      backgroundPosition: \"center\"\n                    }}\n                    aria-label={`linha ${rowIndex + 1}, coluna ${columnIndex + 1}`}\n                  />\n                ))\n              )}\n            </div>\n            <div style={{ marginTop: 16, display: \"flex\", flexWrap: \"wrap\", gap: 12 }}>\n              <button className=\"button\" type=\"button\" onClick={clearGrid}>\n                Limpar grid\n              </button>\n              <button className=\"button\" type=\"button\" onClick={copyToClipboard}>\n                {copied ? \"Copiado!\" : \"Copiar JSON\"}\n              </button>\n              <button className=\"button\" type=\"button\" onClick={saveToFile}>\n                Salvar mapa (.json)\n              </button>\n            </div>\n            <label htmlFor=\"grid-json\" style={{ marginTop: 16 }}>\n              JSON Exportado\n            </label>\n            <textarea\n              id=\"grid-json\"\n              readOnly\n              value={output}\n              style={{ width: \"100%\", minHeight: 120 }}\n            />\n          </div>\n        </>\n      )}\n    </section>\n  );\n}\n\nfunction clamp(value: number, min: number, max: number) {\n  return Math.max(min, Math.min(max, Number.isNaN(value) ? min : value));\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 519, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 538, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 543, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}