{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/lib/clientApi.ts"],"sourcesContent":["const rawBase = process.env.NEXT_PUBLIC_API_URL?.trim() ?? \"\";\nconst API_BASE = /^https?:\\/\\//i.test(rawBase) ? rawBase.replace(/\\/$/, \"\") : \"\";\n\nfunction buildUrl(path: string) {\n  const normalizedPath = path.startsWith(\"/\") ? path : `/${path}`;\n  return `${API_BASE}${normalizedPath}`;\n}\n\nexport async function getJSON<T>(path: string) {\n  const response = await fetch(buildUrl(path), {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    cache: \"no-store\"\n  });\n\n  if (!response.ok) {\n    throw new Error(await response.text());\n  }\n\n  return (await response.json()) as T;\n}\n\nexport async function postJSON<T>(path: string, body: unknown) {\n  const response = await fetch(buildUrl(path), {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(body)\n  });\n\n  if (!response.ok) {\n    throw new Error(await response.text());\n  }\n\n  return (await response.json()) as T;\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,UAAU,4DAAiC,UAAU;AAC3D,MAAM,WAAW,gBAAgB,IAAI,CAAC,WAAW,QAAQ,OAAO,CAAC,OAAO,MAAM;AAE9E,SAAS,SAAS,IAAY;IAC5B,MAAM,iBAAiB,KAAK,UAAU,CAAC,OAAO,OAAO,CAAC,CAAC,EAAE,MAAM;IAC/D,OAAO,GAAG,WAAW,gBAAgB;AACvC;AAEO,eAAe,QAAW,IAAY;IAC3C,MAAM,WAAW,MAAM,MAAM,SAAS,OAAO;QAC3C,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,OAAO;IACT;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI;IACrC;IAEA,OAAQ,MAAM,SAAS,IAAI;AAC7B;AAEO,eAAe,SAAY,IAAY,EAAE,IAAa;IAC3D,MAAM,WAAW,MAAM,MAAM,SAAS,OAAO;QAC3C,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI;IACrC;IAEA,OAAQ,MAAM,SAAS,IAAI;AAC7B"}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/components/InventoryPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { getJSON, postJSON } from \"@/lib/clientApi\";\nimport type { InventoryItem } from \"@/lib/models\";\n\nconst presetItems = [\n  { id: \"potion-small\", name: \"Poção Pequena\", description: \"Restaura 20 HP\", quantity: 1 },\n  { id: \"axe-basic\", name: \"Machado Básico\", description: \"Ferramenta para cortar lenha\", quantity: 1 },\n  { id: \"seed-carrot\", name: \"Sementes de Cenoura\", description: \"Usadas na fazenda\", quantity: 5 }\n] as const;\n\nexport function InventoryPanel({ ownerId }: { ownerId: string }) {\n  const [items, setItems] = useState<InventoryItem[]>([]);\n  const [feedback, setFeedback] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!ownerId) {\n      setItems([]);\n      return;\n    }\n    loadInventory(ownerId);\n  }, [ownerId]);\n\n  async function loadInventory(id: string) {\n    try {\n      const response = await getJSON<InventoryItem[]>(`/api/inventory/get?ownerId=${id}`);\n      setItems(response);\n      setFeedback(null);\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  async function handleQuickAdd(item: typeof presetItems[number]) {\n    if (!ownerId) return;\n    try {\n      const response = await postJSON<InventoryItem[]>(\"/api/inventory/add\", {\n        ownerId,\n        item\n      });\n      setItems(response);\n      setFeedback(`${item.name} adicionado.`);\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  async function handleConsume(itemId: string) {\n    if (!ownerId) return;\n    try {\n      const response = await postJSON<InventoryItem[]>(\"/api/inventory/remove\", {\n        ownerId,\n        itemId,\n        quantity: 1\n      });\n      setItems(response);\n      setFeedback(\"Item consumido.\");\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  return (\n    <div>\n      <h3>Inventário</h3>\n      {feedback && <p>{feedback}</p>}\n      <ul className=\"list\">\n        {items.map((item) => (\n          <li key={item.id} className=\"flex items-center justify-between gap-4\">\n            <div>\n              <strong>{item.name}</strong> — {item.quantity}x\n            </div>\n            <button className=\"button\" type=\"button\" onClick={() => handleConsume(item.id)}>\n              Usar 1\n            </button>\n          </li>\n        ))}\n        {items.length === 0 && <li>Nenhum item registrado.</li>}\n      </ul>\n\n      <div style={{ marginTop: 16 }}>\n        <h4>Adicionar itens comuns</h4>\n        <div className=\"grid\" style={{ gridTemplateColumns: \"repeat(auto-fit,minmax(180px,1fr))\" }}>\n          {presetItems.map((item) => (\n            <button\n              key={item.id}\n              className=\"button\"\n              type=\"button\"\n              onClick={() => handleQuickAdd(item)}\n              style={{ textAlign: \"center\" }}\n            >\n              {item.name}\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction getMessage(err: unknown) {\n  return err instanceof Error ? err.message : \"Erro no inventário\";\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAMA,MAAM,cAAc;IAClB;QAAE,IAAI;QAAgB,MAAM;QAAiB,aAAa;QAAkB,UAAU;IAAE;IACxF;QAAE,IAAI;QAAa,MAAM;QAAkB,aAAa;QAAgC,UAAU;IAAE;IACpG;QAAE,IAAI;QAAe,MAAM;QAAuB,aAAa;QAAqB,UAAU;IAAE;CACjG;AAEM,SAAS,eAAe,EAAE,OAAO,EAAuB;IAC7D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAkB,EAAE;IACtD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IAExD,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,SAAS;YACZ,SAAS,EAAE;YACX;QACF;QACA,cAAc;IAChB,GAAG;QAAC;KAAQ;IAEZ,eAAe,cAAc,EAAU;QACrC,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,2HAAO,EAAkB,CAAC,2BAA2B,EAAE,IAAI;YAClF,SAAS;YACT,YAAY;QACd,EAAE,OAAO,KAAK;YACZ,YAAY,WAAW;QACzB;IACF;IAEA,eAAe,eAAe,IAAgC;QAC5D,IAAI,CAAC,SAAS;QACd,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,4HAAQ,EAAkB,sBAAsB;gBACrE;gBACA;YACF;YACA,SAAS;YACT,YAAY,GAAG,KAAK,IAAI,CAAC,YAAY,CAAC;QACxC,EAAE,OAAO,KAAK;YACZ,YAAY,WAAW;QACzB;IACF;IAEA,eAAe,cAAc,MAAc;QACzC,IAAI,CAAC,SAAS;QACd,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,4HAAQ,EAAkB,yBAAyB;gBACxE;gBACA;gBACA,UAAU;YACZ;YACA,SAAS;YACT,YAAY;QACd,EAAE,OAAO,KAAK;YACZ,YAAY,WAAW;QACzB;IACF;IAEA,qBACE,8OAAC;;0BACC,8OAAC;0BAAG;;;;;;YACH,0BAAY,8OAAC;0BAAG;;;;;;0BACjB,8OAAC;gBAAG,WAAU;;oBACX,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;4BAAiB,WAAU;;8CAC1B,8OAAC;;sDACC,8OAAC;sDAAQ,KAAK,IAAI;;;;;;wCAAU;wCAAI,KAAK,QAAQ;wCAAC;;;;;;;8CAEhD,8OAAC;oCAAO,WAAU;oCAAS,MAAK;oCAAS,SAAS,IAAM,cAAc,KAAK,EAAE;8CAAG;;;;;;;2BAJzE,KAAK,EAAE;;;;;oBASjB,MAAM,MAAM,KAAK,mBAAK,8OAAC;kCAAG;;;;;;;;;;;;0BAG7B,8OAAC;gBAAI,OAAO;oBAAE,WAAW;gBAAG;;kCAC1B,8OAAC;kCAAG;;;;;;kCACJ,8OAAC;wBAAI,WAAU;wBAAO,OAAO;4BAAE,qBAAqB;wBAAqC;kCACtF,YAAY,GAAG,CAAC,CAAC,qBAChB,8OAAC;gCAEC,WAAU;gCACV,MAAK;gCACL,SAAS,IAAM,eAAe;gCAC9B,OAAO;oCAAE,WAAW;gCAAS;0CAE5B,KAAK,IAAI;+BANL,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;AAa1B;AAEA,SAAS,WAAW,GAAY;IAC9B,OAAO,eAAe,QAAQ,IAAI,OAAO,GAAG;AAC9C"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/app/shops/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { postJSON } from \"@/lib/clientApi\";\nimport { InventoryPanel } from \"@/components/InventoryPanel\";\n\ntype ShopItem = {\n  id: string;\n  name: string;\n  quantity: number;\n};\n\nconst shops = [\n  {\n    id: \"shop-tools\",\n    title: \"Loja 1 — Ferramentas e Poções\",\n    items: [\n      { id: \"pocao-cura\", name: \"Poção de Cura\", quantity: 1 },\n      { id: \"pocao-energia\", name: \"Poção de Energia\", quantity: 1 },\n      { id: \"enxada\", name: \"Enxada Básica\", quantity: 1 }\n    ]\n  },\n  {\n    id: \"shop-weapons\",\n    title: \"Loja 2 — Armas\",\n    items: [\n      { id: \"espada-ferro\", name: \"Espada de Ferro\", quantity: 1 },\n      { id: \"arco-simples\", name: \"Arco Simples\", quantity: 1 },\n      { id: \"cajado-luz\", name: \"Cajado de Luz\", quantity: 1 }\n    ]\n  }\n];\n\nexport default function ShopsPage() {\n  const [ownerId, setOwnerId] = useState(\"\");\n  const [feedback, setFeedback] = useState<string | null>(null);\n  const [sellId, setSellId] = useState(\"\");\n  const [sellQty, setSellQty] = useState(1);\n\n  async function buy(item: ShopItem) {\n    if (!ownerId) {\n      setFeedback(\"Informe ownerId para comprar.\");\n      return;\n    }\n    try {\n      await postJSON(\"/api/inventory/add\", {\n        ownerId,\n        item\n      });\n      setFeedback(`${item.name} comprado e enviado ao inventário.`);\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  async function sell(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    if (!ownerId) {\n      setFeedback(\"Informe ownerId para vender.\");\n      return;\n    }\n    try {\n      await postJSON(\"/api/inventory/remove\", {\n        ownerId,\n        itemId: sellId,\n        quantity: sellQty\n      });\n      setFeedback(\"Item vendido e removido do inventário.\");\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  return (\n    <section>\n      <div className=\"card\">\n        <h2>Etapa 4 — Lojas</h2>\n        <p>\n          Três lojas fixas controlam compra e venda de itens. Use o inventário compartilhado para\n          validar as operações.\n        </p>\n        <input\n          placeholder=\"owner-123\"\n          value={ownerId}\n          onChange={(event) => setOwnerId(event.target.value)}\n        />\n        {feedback && <p>{feedback}</p>}\n      </div>\n      <div className=\"grid\">\n        {shops.map((shop) => (\n          <div key={shop.id} className=\"card\">\n            <h3>{shop.title}</h3>\n            <ul className=\"list\">\n              {shop.items.map((item) => (\n                <li key={item.id}>\n                  {item.name}{\" \"}\n                  <button className=\"button\" type=\"button\" onClick={() => buy(item)}>\n                    Comprar\n                  </button>\n                </li>\n              ))}\n            </ul>\n          </div>\n        ))}\n        <div className=\"card\">\n          <h3>Loja 3 — Compra do Jogador</h3>\n          <p>Informe o ID do item e quantidade para vender (remover do inventário).</p>\n          <form onSubmit={sell}>\n            <label htmlFor=\"sell-id\">Item ID</label>\n            <input\n              id=\"sell-id\"\n              required\n              value={sellId}\n              onChange={(event) => setSellId(event.target.value)}\n            />\n            <label htmlFor=\"sell-qty\">Quantidade</label>\n            <input\n              id=\"sell-qty\"\n              type=\"number\"\n              min={1}\n              value={sellQty}\n              onChange={(event) => setSellQty(Number(event.target.value))}\n            />\n            <button className=\"button\">Vender</button>\n          </form>\n        </div>\n      </div>\n      <div className=\"card\">\n        <InventoryPanel ownerId={ownerId} />\n      </div>\n    </section>\n  );\n}\n\nfunction getMessage(err: unknown) {\n  return err instanceof Error ? err.message : \"Falha na loja\";\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 547, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 566, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 571, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}