{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/lib/clientApi.ts"],"sourcesContent":["const API_BASE = process.env.NEXT_PUBLIC_API_URL ?? \"\";\n\nexport async function getJSON<T>(path: string) {\n  const response = await fetch(`${API_BASE}${path}`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    cache: \"no-store\"\n  });\n\n  if (!response.ok) {\n    throw new Error(await response.text());\n  }\n\n  return (await response.json()) as T;\n}\n\nexport async function postJSON<T>(path: string, body: unknown) {\n  const response = await fetch(`${API_BASE}${path}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(body)\n  });\n\n  if (!response.ok) {\n    throw new Error(await response.text());\n  }\n\n  return (await response.json()) as T;\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,WAAW,iEAAmC;AAE7C,eAAe,QAAW,IAAY;IAC3C,MAAM,WAAW,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QACjD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,OAAO;IACT;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI;IACrC;IAEA,OAAQ,MAAM,SAAS,IAAI;AAC7B;AAEO,eAAe,SAAY,IAAY,EAAE,IAAa;IAC3D,MAAM,WAAW,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QACjD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI;IACrC;IAEA,OAAQ,MAAM,SAAS,IAAI;AAC7B"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/components/InventoryPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { getJSON, postJSON } from \"@/lib/clientApi\";\nimport type { InventoryItem } from \"@/lib/models\";\n\nexport function InventoryPanel({ ownerId }: { ownerId: string }) {\n  const [items, setItems] = useState<InventoryItem[]>([]);\n  const [feedback, setFeedback] = useState<string | null>(null);\n  const [newItem, setNewItem] = useState({ id: \"\", name: \"\", quantity: 1 });\n  const [removeItemId, setRemoveItemId] = useState(\"\");\n  const [removeQty, setRemoveQty] = useState(1);\n\n  useEffect(() => {\n    if (!ownerId) {\n      setItems([]);\n      return;\n    }\n    loadInventory(ownerId);\n  }, [ownerId]);\n\n  async function loadInventory(id: string) {\n    try {\n      const response = await getJSON<InventoryItem[]>(`/api/inventory/get?ownerId=${id}`);\n      setItems(response);\n      setFeedback(null);\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  async function handleAdd(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    if (!ownerId) {\n      setFeedback(\"Informe um ownerId para manipular o inventário.\");\n      return;\n    }\n    const payload = {\n      ownerId,\n      item: {\n        id: newItem.id || makeId(),\n        name: newItem.name,\n        quantity: Number(newItem.quantity)\n      }\n    };\n    try {\n      const response = await postJSON<InventoryItem[]>(\"/api/inventory/add\", payload);\n      setItems(response);\n      setFeedback(\"Item adicionado.\");\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  async function handleRemove(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    if (!ownerId) {\n      setFeedback(\"Informe um ownerId para manipular o inventário.\");\n      return;\n    }\n    try {\n      const response = await postJSON<InventoryItem[]>(\"/api/inventory/remove\", {\n        ownerId,\n        itemId: removeItemId,\n        quantity: Number(removeQty)\n      });\n      setItems(response);\n      setFeedback(\"Item removido.\");\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  return (\n    <div>\n      <h3>Inventário</h3>\n      {feedback && <p>{feedback}</p>}\n      <ul className=\"list\">\n        {items.map((item) => (\n          <li key={item.id}>\n            <strong>{item.name}</strong> — {item.quantity}x ({item.id})\n          </li>\n        ))}\n        {items.length === 0 && <li>Nenhum item registrado.</li>}\n      </ul>\n\n      <div className=\"grid\">\n        <form onSubmit={handleAdd}>\n          <h4>Adicionar item</h4>\n          <label htmlFor=\"item-name\">Nome</label>\n          <input\n            id=\"item-name\"\n            required\n            value={newItem.name}\n            onChange={(event) => setNewItem((prev) => ({ ...prev, name: event.target.value }))}\n          />\n          <label htmlFor=\"item-quantity\">Quantidade</label>\n          <input\n            id=\"item-quantity\"\n            type=\"number\"\n            min={1}\n            value={newItem.quantity}\n            onChange={(event) =>\n              setNewItem((prev) => ({ ...prev, quantity: Number(event.target.value) }))\n            }\n          />\n          <button className=\"button\">Adicionar</button>\n        </form>\n        <form onSubmit={handleRemove}>\n          <h4>Remover item</h4>\n          <label htmlFor=\"remove-id\">ID do item</label>\n          <input\n            id=\"remove-id\"\n            required\n            value={removeItemId}\n            onChange={(event) => setRemoveItemId(event.target.value)}\n          />\n          <label htmlFor=\"remove-qty\">Quantidade</label>\n          <input\n            id=\"remove-qty\"\n            type=\"number\"\n            min={1}\n            value={removeQty}\n            onChange={(event) => setRemoveQty(Number(event.target.value))}\n          />\n          <button className=\"button\">Remover</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nfunction getMessage(err: unknown) {\n  return err instanceof Error ? err.message : \"Erro desconhecido\";\n}\n\nfunction makeId() {\n  if (typeof crypto !== \"undefined\" && typeof crypto.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  return `item-${Date.now()}`;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/app/shops/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { postJSON } from \"@/lib/clientApi\";\nimport { InventoryPanel } from \"@/components/InventoryPanel\";\n\ntype ShopItem = {\n  id: string;\n  name: string;\n  quantity: number;\n};\n\nconst shops = [\n  {\n    id: \"shop-tools\",\n    title: \"Loja 1 — Ferramentas e Poções\",\n    items: [\n      { id: \"pocao-cura\", name: \"Poção de Cura\", quantity: 1 },\n      { id: \"pocao-energia\", name: \"Poção de Energia\", quantity: 1 },\n      { id: \"enxada\", name: \"Enxada Básica\", quantity: 1 }\n    ]\n  },\n  {\n    id: \"shop-weapons\",\n    title: \"Loja 2 — Armas\",\n    items: [\n      { id: \"espada-ferro\", name: \"Espada de Ferro\", quantity: 1 },\n      { id: \"arco-simples\", name: \"Arco Simples\", quantity: 1 },\n      { id: \"cajado-luz\", name: \"Cajado de Luz\", quantity: 1 }\n    ]\n  }\n];\n\nexport default function ShopsPage() {\n  const [ownerId, setOwnerId] = useState(\"\");\n  const [feedback, setFeedback] = useState<string | null>(null);\n  const [sellId, setSellId] = useState(\"\");\n  const [sellQty, setSellQty] = useState(1);\n\n  async function buy(item: ShopItem) {\n    if (!ownerId) {\n      setFeedback(\"Informe ownerId para comprar.\");\n      return;\n    }\n    try {\n      await postJSON(\"/api/inventory/add\", {\n        ownerId,\n        item\n      });\n      setFeedback(`${item.name} comprado e enviado ao inventário.`);\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  async function sell(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    if (!ownerId) {\n      setFeedback(\"Informe ownerId para vender.\");\n      return;\n    }\n    try {\n      await postJSON(\"/api/inventory/remove\", {\n        ownerId,\n        itemId: sellId,\n        quantity: sellQty\n      });\n      setFeedback(\"Item vendido e removido do inventário.\");\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  return (\n    <section>\n      <div className=\"card\">\n        <h2>Etapa 4 — Lojas</h2>\n        <p>\n          Três lojas fixas controlam compra e venda de itens. Use o inventário compartilhado para\n          validar as operações.\n        </p>\n        <input\n          placeholder=\"owner-123\"\n          value={ownerId}\n          onChange={(event) => setOwnerId(event.target.value)}\n        />\n        {feedback && <p>{feedback}</p>}\n      </div>\n      <div className=\"grid\">\n        {shops.map((shop) => (\n          <div key={shop.id} className=\"card\">\n            <h3>{shop.title}</h3>\n            <ul className=\"list\">\n              {shop.items.map((item) => (\n                <li key={item.id}>\n                  {item.name}{\" \"}\n                  <button className=\"button\" type=\"button\" onClick={() => buy(item)}>\n                    Comprar\n                  </button>\n                </li>\n              ))}\n            </ul>\n          </div>\n        ))}\n        <div className=\"card\">\n          <h3>Loja 3 — Compra do Jogador</h3>\n          <p>Informe o ID do item e quantidade para vender (remover do inventário).</p>\n          <form onSubmit={sell}>\n            <label htmlFor=\"sell-id\">Item ID</label>\n            <input\n              id=\"sell-id\"\n              required\n              value={sellId}\n              onChange={(event) => setSellId(event.target.value)}\n            />\n            <label htmlFor=\"sell-qty\">Quantidade</label>\n            <input\n              id=\"sell-qty\"\n              type=\"number\"\n              min={1}\n              value={sellQty}\n              onChange={(event) => setSellQty(Number(event.target.value))}\n            />\n            <button className=\"button\">Vender</button>\n          </form>\n        </div>\n      </div>\n      <div className=\"card\">\n        <InventoryPanel ownerId={ownerId} />\n      </div>\n    </section>\n  );\n}\n\nfunction getMessage(err: unknown) {\n  return err instanceof Error ? err.message : \"Falha na loja\";\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 621, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}