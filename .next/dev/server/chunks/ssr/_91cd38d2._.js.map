{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/lib/clientApi.ts"],"sourcesContent":["const API_BASE = process.env.NEXT_PUBLIC_API_URL ?? \"\";\n\nexport async function getJSON<T>(path: string) {\n  const response = await fetch(`${API_BASE}${path}`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    cache: \"no-store\"\n  });\n\n  if (!response.ok) {\n    throw new Error(await response.text());\n  }\n\n  return (await response.json()) as T;\n}\n\nexport async function postJSON<T>(path: string, body: unknown) {\n  const response = await fetch(`${API_BASE}${path}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(body)\n  });\n\n  if (!response.ok) {\n    throw new Error(await response.text());\n  }\n\n  return (await response.json()) as T;\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,WAAW,iEAAmC;AAE7C,eAAe,QAAW,IAAY;IAC3C,MAAM,WAAW,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QACjD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,OAAO;IACT;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI;IACrC;IAEA,OAAQ,MAAM,SAAS,IAAI;AAC7B;AAEO,eAAe,SAAY,IAAY,EAAE,IAAa;IAC3D,MAAM,WAAW,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QACjD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI;IACrC;IAEA,OAAQ,MAAM,SAAS,IAAI;AAC7B"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/app/house/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { getJSON, postJSON } from \"@/lib/clientApi\";\nimport type { HouseFurniture, HouseState } from \"@/lib/models\";\n\nexport default function HousePage() {\n  const [ownerId, setOwnerId] = useState(\"\");\n  const [house, setHouse] = useState<HouseState | null>(null);\n  const [selectedId, setSelectedId] = useState(\"bed\");\n  const [position, setPosition] = useState({ x: 64, y: 64 });\n  const [feedback, setFeedback] = useState<string | null>(null);\n\n  async function load() {\n    if (!ownerId) {\n      setFeedback(\"Informe o ownerId.\");\n      return;\n    }\n    try {\n      const state = await getJSON<HouseState>(`/api/house/get?ownerId=${ownerId}`);\n      setHouse(state);\n      if (state.furniture.length > 0) {\n        setSelectedId(state.furniture[0].id);\n        setPosition(state.furniture[0].position);\n      }\n      setFeedback(null);\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  async function save(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    if (!house || !ownerId) {\n      setFeedback(\"Carregue a casa antes de salvar.\");\n      return;\n    }\n    const updatedFurniture = updateFurniture(house.furniture, selectedId, position);\n    try {\n      const next = await postJSON<HouseState>(\"/api/house/update\", {\n        ownerId,\n        furniture: updatedFurniture\n      });\n      setHouse(next);\n      setFeedback(\"Mobília salva.\");\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  return (\n    <section>\n      <div className=\"card\">\n        <h2>Etapa 4 — Casa do Jogador</h2>\n        <p>Carregue a casa, ajuste as posições dos 4 móveis e salve as alterações.</p>\n        <input\n          placeholder=\"owner-123\"\n          value={ownerId}\n          onChange={(event) => setOwnerId(event.target.value)}\n        />\n        <button className=\"button\" style={{ marginTop: 12 }} type=\"button\" onClick={load}>\n          Carregar Casa\n        </button>\n        {feedback && <p>{feedback}</p>}\n      </div>\n\n      {house && (\n        <div className=\"grid\">\n          <div className=\"card\">\n            <h3>Móveis em uso</h3>\n            <ul className=\"list\">\n              {house.furniture.map((item) => (\n                <li key={item.id}>\n                  {item.name} — ({item.position.x}, {item.position.y})\n                </li>\n              ))}\n            </ul>\n          </div>\n          <div className=\"card\">\n            <form onSubmit={save}>\n              <h3>Atualizar mobília</h3>\n              <label htmlFor=\"furniture-id\">Móvel</label>\n              <select\n                id=\"furniture-id\"\n                value={selectedId}\n                onChange={(event) => setSelectedId(event.target.value)}\n              >\n                {house.furniture.map((item) => (\n                  <option key={item.id} value={item.id}>\n                    {item.name}\n                  </option>\n                ))}\n              </select>\n              <label htmlFor=\"pos-x\">Posição X</label>\n              <input\n                id=\"pos-x\"\n                type=\"number\"\n                min={0}\n                max={256}\n                value={position.x}\n                onChange={(event) => setPosition((prev) => ({ ...prev, x: Number(event.target.value) }))}\n              />\n              <label htmlFor=\"pos-y\">Posição Y</label>\n              <input\n                id=\"pos-y\"\n                type=\"number\"\n                min={0}\n                max={256}\n                value={position.y}\n                onChange={(event) => setPosition((prev) => ({ ...prev, y: Number(event.target.value) }))}\n              />\n              <button className=\"button\">Salvar posição</button>\n            </form>\n          </div>\n        </div>\n      )}\n    </section>\n  );\n}\n\nfunction updateFurniture(list: HouseFurniture[], targetId: string, position: { x: number; y: number }) {\n  return list.map((item) => (item.id === targetId ? { ...item, position: { ...position } } : item));\n}\n\nfunction getMessage(err: unknown) {\n  return err instanceof Error ? err.message : \"Falha ao carregar casa\";\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAMe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAoB;IACtD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;QAAE,GAAG;QAAI,GAAG;IAAG;IACxD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IAExD,eAAe;QACb,IAAI,CAAC,SAAS;YACZ,YAAY;YACZ;QACF;QACA,IAAI;YACF,MAAM,QAAQ,MAAM,IAAA,2HAAO,EAAa,CAAC,uBAAuB,EAAE,SAAS;YAC3E,SAAS;YACT,IAAI,MAAM,SAAS,CAAC,MAAM,GAAG,GAAG;gBAC9B,cAAc,MAAM,SAAS,CAAC,EAAE,CAAC,EAAE;gBACnC,YAAY,MAAM,SAAS,CAAC,EAAE,CAAC,QAAQ;YACzC;YACA,YAAY;QACd,EAAE,OAAO,KAAK;YACZ,YAAY,WAAW;QACzB;IACF;IAEA,eAAe,KAAK,KAAuC;QACzD,MAAM,cAAc;QACpB,IAAI,CAAC,SAAS,CAAC,SAAS;YACtB,YAAY;YACZ;QACF;QACA,MAAM,mBAAmB,gBAAgB,MAAM,SAAS,EAAE,YAAY;QACtE,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,4HAAQ,EAAa,qBAAqB;gBAC3D;gBACA,WAAW;YACb;YACA,SAAS;YACT,YAAY;QACd,EAAE,OAAO,KAAK;YACZ,YAAY,WAAW;QACzB;IACF;IAEA,qBACE,8OAAC;;0BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;kCAAG;;;;;;kCACJ,8OAAC;kCAAE;;;;;;kCACH,8OAAC;wBACC,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;;;;;;kCAEpD,8OAAC;wBAAO,WAAU;wBAAS,OAAO;4BAAE,WAAW;wBAAG;wBAAG,MAAK;wBAAS,SAAS;kCAAM;;;;;;oBAGjF,0BAAY,8OAAC;kCAAG;;;;;;;;;;;;YAGlB,uBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAG,WAAU;0CACX,MAAM,SAAS,CAAC,GAAG,CAAC,CAAC,qBACpB,8OAAC;;4CACE,KAAK,IAAI;4CAAC;4CAAK,KAAK,QAAQ,CAAC,CAAC;4CAAC;4CAAG,KAAK,QAAQ,CAAC,CAAC;4CAAC;;uCAD5C,KAAK,EAAE;;;;;;;;;;;;;;;;kCAMtB,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAK,UAAU;;8CACd,8OAAC;8CAAG;;;;;;8CACJ,8OAAC;oCAAM,SAAQ;8CAAe;;;;;;8CAC9B,8OAAC;oCACC,IAAG;oCACH,OAAO;oCACP,UAAU,CAAC,QAAU,cAAc,MAAM,MAAM,CAAC,KAAK;8CAEpD,MAAM,SAAS,CAAC,GAAG,CAAC,CAAC,qBACpB,8OAAC;4CAAqB,OAAO,KAAK,EAAE;sDACjC,KAAK,IAAI;2CADC,KAAK,EAAE;;;;;;;;;;8CAKxB,8OAAC;oCAAM,SAAQ;8CAAQ;;;;;;8CACvB,8OAAC;oCACC,IAAG;oCACH,MAAK;oCACL,KAAK;oCACL,KAAK;oCACL,OAAO,SAAS,CAAC;oCACjB,UAAU,CAAC,QAAU,YAAY,CAAC,OAAS,CAAC;gDAAE,GAAG,IAAI;gDAAE,GAAG,OAAO,MAAM,MAAM,CAAC,KAAK;4CAAE,CAAC;;;;;;8CAExF,8OAAC;oCAAM,SAAQ;8CAAQ;;;;;;8CACvB,8OAAC;oCACC,IAAG;oCACH,MAAK;oCACL,KAAK;oCACL,KAAK;oCACL,OAAO,SAAS,CAAC;oCACjB,UAAU,CAAC,QAAU,YAAY,CAAC,OAAS,CAAC;gDAAE,GAAG,IAAI;gDAAE,GAAG,OAAO,MAAM,MAAM,CAAC,KAAK;4CAAE,CAAC;;;;;;8CAExF,8OAAC;oCAAO,WAAU;8CAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOzC;AAEA,SAAS,gBAAgB,IAAsB,EAAE,QAAgB,EAAE,QAAkC;IACnG,OAAO,KAAK,GAAG,CAAC,CAAC,OAAU,KAAK,EAAE,KAAK,WAAW;YAAE,GAAG,IAAI;YAAE,UAAU;gBAAE,GAAG,QAAQ;YAAC;QAAE,IAAI;AAC7F;AAEA,SAAS,WAAW,GAAY;IAC9B,OAAO,eAAe,QAAQ,IAAI,OAAO,GAAG;AAC9C"}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}