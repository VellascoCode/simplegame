{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/lib/clientApi.ts"],"sourcesContent":["const API_BASE = process.env.NEXT_PUBLIC_API_URL ?? \"\";\n\nexport async function getJSON<T>(path: string) {\n  const response = await fetch(`${API_BASE}${path}`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    cache: \"no-store\"\n  });\n\n  if (!response.ok) {\n    throw new Error(await response.text());\n  }\n\n  return (await response.json()) as T;\n}\n\nexport async function postJSON<T>(path: string, body: unknown) {\n  const response = await fetch(`${API_BASE}${path}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(body)\n  });\n\n  if (!response.ok) {\n    throw new Error(await response.text());\n  }\n\n  return (await response.json()) as T;\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,WAAW,iEAAmC;AAE7C,eAAe,QAAW,IAAY;IAC3C,MAAM,WAAW,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QACjD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,OAAO;IACT;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI;IACrC;IAEA,OAAQ,MAAM,SAAS,IAAI;AAC7B;AAEO,eAAe,SAAY,IAAY,EAAE,IAAa;IAC3D,MAAM,WAAW,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QACjD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,MAAM,SAAS,IAAI;IACrC;IAEA,OAAQ,MAAM,SAAS,IAAI;AAC7B"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/app/farm/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { getJSON, postJSON } from \"@/lib/clientApi\";\nimport type { FarmState } from \"@/lib/models\";\n\nexport default function FarmPage() {\n  const [ownerId, setOwnerId] = useState(\"\");\n  const [farm, setFarm] = useState<FarmState | null>(null);\n  const [plotId, setPlotId] = useState(\"plot-1\");\n  const [seed, setSeed] = useState(\"trigo\");\n  const [feedback, setFeedback] = useState<string | null>(null);\n\n  async function load() {\n    if (!ownerId) {\n      setFeedback(\"Informe um ownerId para carregar a fazenda.\");\n      return;\n    }\n    try {\n      const data = await getJSON<FarmState>(`/api/farm/get?ownerId=${ownerId}`);\n      setFarm(data);\n      setPlotId(data.plots[0]?.id ?? \"plot-1\");\n      setFeedback(null);\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  async function handlePlant(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    if (!ownerId) return;\n    try {\n      const data = await postJSON<FarmState>(\"/api/farm/plant\", { ownerId, plotId, seed });\n      setFarm(data);\n      setFeedback(\"Plantio registrado.\");\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  async function handleHarvest(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    if (!ownerId) return;\n    try {\n      const data = await postJSON<FarmState>(\"/api/farm/harvest\", { ownerId, plotId });\n      setFarm(data);\n      setFeedback(\"Colheita concluída.\");\n    } catch (err) {\n      setFeedback(getMessage(err));\n    }\n  }\n\n  return (\n    <section>\n      <div className=\"card\">\n        <h2>Etapa 4 — Fazenda</h2>\n        <p>Controle os 4 espaços de plantio, registrando plantios e colheitas.</p>\n        <input\n          placeholder=\"owner-123\"\n          value={ownerId}\n          onChange={(event) => setOwnerId(event.target.value)}\n        />\n        <button className=\"button\" style={{ marginTop: 12 }} type=\"button\" onClick={load}>\n          Carregar Fazenda\n        </button>\n        {feedback && <p>{feedback}</p>}\n      </div>\n      {farm && (\n        <div className=\"grid\">\n          <div className=\"card\">\n            <h3>Plots</h3>\n            <ul className=\"list\">\n              {farm.plots.map((plot) => (\n                <li key={plot.id}>\n                  {plot.id} — {plot.seed ? `Cultivando ${plot.seed}` : \"Vazio\"}{\" \"}\n                  {plot.harvestReadyAt && (\n                    <small>Pronto às {new Date(plot.harvestReadyAt).toLocaleTimeString()}</small>\n                  )}\n                </li>\n              ))}\n            </ul>\n          </div>\n          <div className=\"card\">\n            <form onSubmit={handlePlant}>\n              <h3>Plantar</h3>\n              <label htmlFor=\"plot-select\">Plot</label>\n              <select\n                id=\"plot-select\"\n                value={plotId}\n                onChange={(event) => setPlotId(event.target.value)}\n              >\n                {farm.plots.map((plot) => (\n                  <option key={plot.id}>{plot.id}</option>\n                ))}\n              </select>\n              <label htmlFor=\"seed\">Semente</label>\n              <select id=\"seed\" value={seed} onChange={(event) => setSeed(event.target.value)}>\n                <option value=\"trigo\">Trigo</option>\n                <option value=\"cenoura\">Cenoura</option>\n                <option value=\"batata\">Batata</option>\n              </select>\n              <button className=\"button\">Plantar</button>\n            </form>\n          </div>\n          <div className=\"card\">\n            <form onSubmit={handleHarvest}>\n              <h3>Colher</h3>\n              <p>Selecione o mesmo plot para liberar e coletar itens.</p>\n              <label htmlFor=\"plot-select-harvest\">Plot</label>\n              <select\n                id=\"plot-select-harvest\"\n                value={plotId}\n                onChange={(event) => setPlotId(event.target.value)}\n              >\n                {farm.plots.map((plot) => (\n                  <option key={plot.id}>{plot.id}</option>\n                ))}\n              </select>\n              <button className=\"button\">Colher</button>\n            </form>\n          </div>\n        </div>\n      )}\n    </section>\n  );\n}\n\nfunction getMessage(err: unknown) {\n  return err instanceof Error ? err.message : \"Falha na fazenda\";\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///Users/diegovellasco/simplegame/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}